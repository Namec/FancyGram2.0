(function(a,b,c,d){a.fn.caret=function(f,g){var h,l,m=this[0],n=a.browser.msie;if(typeof f=="object"&&typeof f.start=="number"&&typeof f.end=="number"){h=f.start;l=f.end}else if(typeof f=="number"&&typeof g=="number"){h=f;l=g}else if(typeof f=="string")(h=m.value.indexOf(f))>-1?l=h+f[b]:h=null;else if(Object.prototype.toString.call(f)==="[object RegExp]"){f=f.exec(m.value);if(f!=null){h=f.index;l=h+f[0][b]}}if(typeof h!="undefined"){if(n){n=this[0].createTextRange();n.collapse(!0);n.moveStart("character",h);n.moveEnd("character",l-h);n.select()}else{this[0].selectionStart=h;this[0].selectionEnd=l}this[0].focus();return this}if(n){l=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){n=this.val();h=l[c]()[d]();h.moveEnd("character",n[b]);var o=h.text==""?n[b]:n.lastIndexOf(h.text);h=l[c]()[d]();h.moveStart("character",-n[b]);var p=h.text[b]}else{h=l[c]();l=h[d]();l.moveToElementText(this[0]);l.setEndPoint("EndToEnd",h);o=l.text[b]-h.text[b];p=o+h.text[b]}}else{o=m.selectionStart;p=m.selectionEnd}h=m.value.substring(o,p);return{start:o,end:p,text:h,replace:function(a){return m.value.substring(0,o)+a+m.value.substring(p,m.value[b])}}}})(jQuery,"length","createRange","duplicate");